#!/bin/bash

# source_tests_dir="`dirname $0`"
# cp -f $source_tests_dir/simpleplane.test . 2> /dev/null
# cp -f $source_tests_dir/simpleplane.state state 2> /dev/null

echo '{
  "system" : {
    "cuboid"   : { "len" : 100.0 },
    "mcloop"   : { "macro":20, "micro":100 },
    "unittest" : { "testfile":"simpleplane.test", "stable":false }
  },

  "energy" : {
    "nonbonded" : {
      "coulomb" : { "epsr" : 1.0, "cutoff":9 },
      "ewald"   : { "precision":0.01, "epsr_surf":1e11, "cutoff":9, "alpha":0.2 },
      "cutoff_g2g" : 10
    }
  },

  "atomlist" : {
    "OW" : { "q":-0.8476, "sigma":3.2, "eps":0.65 },
    "HW" : { "q": 0.4238, "sigma":0.0, "eps":0    }
  },

  "moleculelist" : {
    "water" : { "structure":"simpleplane.aam", "Ninit":10, "insdir":"1 1 0" }
  },

    "analysis" : {
      "virtualvolume" : { "nstep":5, "dV":0.2 },
      "widommolecule" : {"ninsert": 100, "dir": "1 1 0", "molecule": "water", "nstep": 1000}
      },

  "moves" : {
     "moltransrot" : {
        "water" : { "dp":20, "dprot":0.5, "dir":"1 1 0", "permol":true }
     }
  }
}' > simpleplane.json

# remove isobaric, that makes changes in volume

echo "1
OW    1    2.30    6.28    1.13 0  1  2
" > simpleplane.aam

exe=./simpleplane
if [ -x $exe ]; then
 $exe
 rc=$?
 exit $rc
fi
exit 1
